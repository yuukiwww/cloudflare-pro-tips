# クラウドフレアを使いこなすためにやったこと

SSL/TLSで、自動モードを無効にし、カスタム設定でフル (厳密)モードにして、オリジンとエッジの両方を暗号化する。

キャッシュの構成で、ブラウザ キャッシュ TTLを既存のヘッダーを優先に設定してオリジンからキャッシュの設定を読み取る。

階層型キャッシュで、スマート階層型キャッシュトポロジーを有効にして、エッジキャッシュのヒット率を高める。

構成ルールで、API(保護用)とフロントページ(APIの保護解除用)にI’m Under Attackモードを設定し、人間ではないアクセスをブロックして、一部のボットGoogle(AS15169)、Bing(AS8075)、Discord(AS396982)、LINE(AS38631)をフロントページでインデックスやリンクプレビューの為に許可できる。

キャッシュルールで、適切にエッジキャッシュの対象に追加し、エッジキャッシュのヒット率を高める。
